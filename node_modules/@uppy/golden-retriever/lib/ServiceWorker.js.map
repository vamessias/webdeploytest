{"version":3,"names":["fileCache","Object","create","getCache","name","_fileCache$name","self","addEventListener","event","waitUntil","Promise","resolve","then","skipWaiting","clients","claim","sendMessageToAllClients","msg","matchAll","forEach","client","postMessage","addFile","store","file","id","data","removeFile","fileID","getFiles","type","files","_event$data","Error"],"sources":["ServiceWorker.js"],"sourcesContent":["/* globals clients */\n\nconst fileCache = Object.create(null)\n\nfunction getCache (name) {\n  fileCache[name] ??= Object.create(null)\n  return fileCache[name]\n}\n\nself.addEventListener('install', (event) => {\n  event.waitUntil(Promise.resolve()\n    .then(() => self.skipWaiting()))\n})\n\nself.addEventListener('activate', (event) => {\n  event.waitUntil(self.clients.claim())\n})\n\nfunction sendMessageToAllClients (msg) {\n  clients.matchAll().then((clients) => {\n    clients.forEach((client) => {\n      client.postMessage(msg)\n    })\n  })\n}\n\nfunction addFile (store, file) {\n  getCache(store)[file.id] = file.data\n}\n\nfunction removeFile (store, fileID) {\n  delete getCache(store)[fileID]\n}\n\nfunction getFiles (store) {\n  sendMessageToAllClients({\n    type: 'uppy/ALL_FILES',\n    store,\n    files: getCache(store),\n  })\n}\n\nself.addEventListener('message', (event) => {\n  switch (event.data.type) {\n    case 'uppy/ADD_FILE':\n      addFile(event.data.store, event.data.file)\n      break\n    case 'uppy/REMOVE_FILE':\n      removeFile(event.data.store, event.data.fileID)\n      break\n    case 'uppy/GET_FILES':\n      getFiles(event.data.store)\n      break\n    default:\n      throw new Error(`[ServiceWorker] Unsupported event.data.type. Got: ${event?.data?.type}`)\n  }\n})\n"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AAErC,SAASC,QAAQA,CAAEC,IAAI,EAAE;EAAA,IAAAC,eAAA;EACvB,CAAAA,eAAA,GAAAL,SAAS,CAACI,IAAI,CAAC,YAAAC,eAAA,GAAfL,SAAS,CAACI,IAAI,CAAC,GAAKH,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;EACvC,OAAOF,SAAS,CAACI,IAAI,CAAC;AACxB;AAEAE,IAAI,CAACC,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;EAC1CA,KAAK,CAACC,SAAS,CAACC,OAAO,CAACC,OAAO,CAAC,CAAC,CAC9BC,IAAI,CAAC,MAAMN,IAAI,CAACO,WAAW,CAAC,CAAC,CAAC,CAAC;AACpC,CAAC,CAAC;AAEFP,IAAI,CAACC,gBAAgB,CAAC,UAAU,EAAGC,KAAK,IAAK;EAC3CA,KAAK,CAACC,SAAS,CAACH,IAAI,CAACQ,OAAO,CAACC,KAAK,CAAC,CAAC,CAAC;AACvC,CAAC,CAAC;AAEF,SAASC,uBAAuBA,CAAEC,GAAG,EAAE;EACrCH,OAAO,CAACI,QAAQ,CAAC,CAAC,CAACN,IAAI,CAAEE,OAAO,IAAK;IACnCA,OAAO,CAACK,OAAO,CAAEC,MAAM,IAAK;MAC1BA,MAAM,CAACC,WAAW,CAACJ,GAAG,CAAC;IACzB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AAEA,SAASK,OAAOA,CAAEC,KAAK,EAAEC,IAAI,EAAE;EAC7BrB,QAAQ,CAACoB,KAAK,CAAC,CAACC,IAAI,CAACC,EAAE,CAAC,GAAGD,IAAI,CAACE,IAAI;AACtC;AAEA,SAASC,UAAUA,CAAEJ,KAAK,EAAEK,MAAM,EAAE;EAClC,OAAOzB,QAAQ,CAACoB,KAAK,CAAC,CAACK,MAAM,CAAC;AAChC;AAEA,SAASC,QAAQA,CAAEN,KAAK,EAAE;EACxBP,uBAAuB,CAAC;IACtBc,IAAI,EAAE,gBAAgB;IACtBP,KAAK;IACLQ,KAAK,EAAE5B,QAAQ,CAACoB,KAAK;EACvB,CAAC,CAAC;AACJ;AAEAjB,IAAI,CAACC,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;EAAA,IAAAwB,WAAA;EAC1C,QAAQxB,KAAK,CAACkB,IAAI,CAACI,IAAI;IACrB,KAAK,eAAe;MAClBR,OAAO,CAACd,KAAK,CAACkB,IAAI,CAACH,KAAK,EAAEf,KAAK,CAACkB,IAAI,CAACF,IAAI,CAAC;MAC1C;IACF,KAAK,kBAAkB;MACrBG,UAAU,CAACnB,KAAK,CAACkB,IAAI,CAACH,KAAK,EAAEf,KAAK,CAACkB,IAAI,CAACE,MAAM,CAAC;MAC/C;IACF,KAAK,gBAAgB;MACnBC,QAAQ,CAACrB,KAAK,CAACkB,IAAI,CAACH,KAAK,CAAC;MAC1B;IACF;MACE,MAAM,IAAIU,KAAK,CAAC,qDAAqDzB,KAAK,aAAAwB,WAAA,GAALxB,KAAK,CAAEkB,IAAI,qBAAXM,WAAA,CAAaF,IAAI,EAAE,CAAC;EAC7F;AACF,CAAC,CAAC","ignoreList":[]}
{"version":3,"names":["Provider","getAllowedHosts","tokenStorage","UIPlugin","ProviderViews","h","locale","packageJson","Facebook","constructor","uppy","opts","rootFolderId","id","type","storage","files","icon","focusable","width","height","viewBox","fill","fillRule","d","companionAllowedHosts","companionUrl","provider","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","supportsRefreshToken","defaultLocale","i18nInit","title","i18n","render","bind","install","view","target","mount","uninstall","tearDown","unmount","state","partialTree","currentFolderId","getPluginState","foldersInThisFolder","filter","i","parentId","length","viewType","showFilter","showTitles","VERSION","version"],"sources":["Facebook.tsx"],"sourcesContent":["import {\n  Provider,\n  getAllowedHosts,\n  tokenStorage,\n  type CompanionPluginOptions,\n} from '@uppy/companion-client'\nimport { UIPlugin, Uppy } from '@uppy/core'\nimport { ProviderViews } from '@uppy/provider-views'\nimport { h, type ComponentChild } from 'preact'\n\nimport type { UppyFile, Body, Meta } from '@uppy/utils/lib/UppyFile'\nimport type {\n  AsyncStore,\n  UnknownProviderPlugin,\n  UnknownProviderPluginState,\n} from '@uppy/core/lib/Uppy.js'\nimport locale from './locale.ts'\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../package.json'\n\nexport type FacebookOptions = CompanionPluginOptions\n\nexport default class Facebook<M extends Meta, B extends Body>\n  extends UIPlugin<FacebookOptions, M, B, UnknownProviderPluginState>\n  implements UnknownProviderPlugin<M, B>\n{\n  static VERSION = packageJson.version\n\n  icon: () => h.JSX.Element\n\n  provider: Provider<M, B>\n\n  view!: ProviderViews<M, B>\n\n  storage: AsyncStore\n\n  files: UppyFile<M, B>[]\n\n  rootFolderId: string | null = null\n\n  constructor(uppy: Uppy<M, B>, opts: FacebookOptions) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'Facebook'\n    this.type = 'acquirer'\n    this.storage = this.opts.storage || tokenStorage\n    this.files = []\n    this.icon = () => (\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        width=\"32\"\n        height=\"32\"\n        viewBox=\"0 0 32 32\"\n      >\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M27 16c0-6.075-4.925-11-11-11S5 9.925 5 16c0 5.49 4.023 10.041 9.281 10.866V19.18h-2.793V16h2.793v-2.423c0-2.757 1.642-4.28 4.155-4.28 1.204 0 2.462.215 2.462.215v2.707h-1.387c-1.366 0-1.792.848-1.792 1.718V16h3.05l-.487 3.18h-2.563v7.686C22.977 26.041 27 21.49 27 16\"\n            fill=\"#1777F2\"\n          />\n          <path\n            d=\"M20.282 19.18L20.77 16h-3.051v-2.063c0-.87.426-1.718 1.792-1.718h1.387V9.512s-1.258-.215-2.462-.215c-2.513 0-4.155 1.523-4.155 4.28V16h-2.793v3.18h2.793v7.686a11.082 11.082 0 003.438 0V19.18h2.563\"\n            fill=\"#FFFFFE\"\n          />\n        </g>\n      </svg>\n    )\n\n    this.opts.companionAllowedHosts = getAllowedHosts(\n      this.opts.companionAllowedHosts,\n      this.opts.companionUrl,\n    )\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'facebook',\n      pluginId: this.id,\n      supportsRefreshToken: false,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameFacebook')\n\n    this.render = this.render.bind(this)\n  }\n\n  install(): void {\n    this.view = new ProviderViews(this, {\n      provider: this.provider,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall(): void {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  render(state: unknown): ComponentChild {\n    const { partialTree, currentFolderId } = this.getPluginState()\n\n    const foldersInThisFolder = partialTree.filter(\n      (i) => i.type === 'folder' && i.parentId === currentFolderId,\n    )\n\n    if (foldersInThisFolder.length === 0) {\n      return this.view.render(state, {\n        viewType: 'grid',\n        showFilter: false,\n        showTitles: false,\n      })\n    }\n    return this.view.render(state)\n  }\n}\n"],"mappings":"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","ignoreList":[]}
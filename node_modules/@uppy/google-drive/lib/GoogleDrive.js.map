{"version":3,"names":["Provider","getAllowedHosts","tokenStorage","UIPlugin","h","DriveProviderViews","locale","packageJson","GoogleDrive","constructor","uppy","opts","rootFolderId","type","storage","files","id","icon","focusable","width","height","viewBox","fillRule","fill","d","companionAllowedHosts","companionUrl","provider","companionHeaders","companionKeysParams","companionCookiesRule","pluginId","supportsRefreshToken","defaultLocale","i18nInit","title","i18n","render","bind","install","view","loadAllFiles","virtualList","target","mount","uninstall","tearDown","unmount","state","VERSION","version"],"sources":["GoogleDrive.tsx"],"sourcesContent":["import {\n  Provider,\n  getAllowedHosts,\n  tokenStorage,\n  type CompanionPluginOptions,\n} from '@uppy/companion-client'\nimport { UIPlugin, Uppy } from '@uppy/core'\nimport { ProviderViews } from '@uppy/provider-views'\nimport { h, type ComponentChild } from 'preact'\n\nimport type { UppyFile, Body, Meta } from '@uppy/utils/lib/UppyFile'\nimport type {\n  AsyncStore,\n  UnknownProviderPlugin,\n  UnknownProviderPluginState,\n} from '@uppy/core/lib/Uppy.js'\nimport DriveProviderViews from './DriveProviderViews.ts'\nimport locale from './locale.ts'\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../package.json'\n\nexport type GoogleDriveOptions = CompanionPluginOptions\n\nexport default class GoogleDrive<M extends Meta, B extends Body>\n  extends UIPlugin<GoogleDriveOptions, M, B, UnknownProviderPluginState>\n  implements UnknownProviderPlugin<M, B>\n{\n  static VERSION = packageJson.version\n\n  icon: () => h.JSX.Element\n\n  provider: Provider<M, B>\n\n  view!: ProviderViews<M, B>\n\n  storage: AsyncStore\n\n  files: UppyFile<M, B>[]\n\n  rootFolderId: string | null = 'root'\n\n  constructor(uppy: Uppy<M, B>, opts: GoogleDriveOptions) {\n    super(uppy, opts)\n    this.type = 'acquirer'\n    this.storage = this.opts.storage || tokenStorage\n    this.files = []\n    this.id = this.opts.id || 'GoogleDrive'\n    this.icon = () => (\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        width=\"32\"\n        height=\"32\"\n        viewBox=\"0 0 32 32\"\n      >\n        <g fillRule=\"nonzero\" fill=\"none\">\n          <path\n            d=\"M6.663 22.284l.97 1.62c.202.34.492.609.832.804l3.465-5.798H5c0 .378.1.755.302 1.096l1.361 2.278z\"\n            fill=\"#0066DA\"\n          />\n          <path\n            d=\"M16 12.09l-3.465-5.798c-.34.195-.63.463-.832.804l-6.4 10.718A2.15 2.15 0 005 18.91h6.93L16 12.09z\"\n            fill=\"#00AC47\"\n          />\n          <path\n            d=\"M23.535 24.708c.34-.195.63-.463.832-.804l.403-.67 1.928-3.228c.201-.34.302-.718.302-1.096h-6.93l1.474 2.802 1.991 2.996z\"\n            fill=\"#EA4335\"\n          />\n          <path\n            d=\"M16 12.09l3.465-5.798A2.274 2.274 0 0018.331 6h-4.662c-.403 0-.794.11-1.134.292L16 12.09z\"\n            fill=\"#00832D\"\n          />\n          <path\n            d=\"M20.07 18.91h-8.14l-3.465 5.798c.34.195.73.292 1.134.292h12.802c.403 0 .794-.11 1.134-.292L20.07 18.91z\"\n            fill=\"#2684FC\"\n          />\n          <path\n            d=\"M23.497 12.455l-3.2-5.359a2.252 2.252 0 00-.832-.804L16 12.09l4.07 6.82h6.917c0-.377-.1-.755-.302-1.096l-3.188-5.359z\"\n            fill=\"#FFBA00\"\n          />\n        </g>\n      </svg>\n    )\n\n    this.opts.companionAllowedHosts = getAllowedHosts(\n      this.opts.companionAllowedHosts,\n      this.opts.companionUrl,\n    )\n    this.provider = new Provider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionKeysParams: this.opts.companionKeysParams,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'drive',\n      pluginId: this.id,\n      supportsRefreshToken: true,\n    })\n\n    this.defaultLocale = locale\n\n    this.i18nInit()\n    this.title = this.i18n('pluginNameGoogleDrive')\n\n    this.render = this.render.bind(this)\n  }\n\n  install(): void {\n    this.view = new DriveProviderViews(this, {\n      provider: this.provider,\n      loadAllFiles: true,\n      virtualList: true,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  uninstall(): void {\n    this.view.tearDown()\n    this.unmount()\n  }\n\n  render(state: unknown): ComponentChild {\n    return this.view.render(state)\n  }\n}\n"],"mappings":"AAAA,SACEA,QAAQ,EACRC,eAAe,EACfC,YAAY,QAEP,wBAAwB;AAC/B,SAASC,QAAQ,QAAc,YAAY;AAE3C,SAASC,CAAC,QAA6B,QAAQ;AAQ/C,OAAOC,kBAAkB,MAAM,yBAAyB;AACxD,OAAOC,MAAM,MAAM,aAAa;AAChC;AACA;AAAA,MACOC,WAAW;EAAA;AAAA;AAIlB,eAAe,MAAMC,WAAW,SACtBL,QAAQ,CAElB;EAeEM,WAAWA,CAACC,IAAgB,EAAEC,IAAwB,EAAE;IACtD,KAAK,CAACD,IAAI,EAAEC,IAAI,CAAC;IAAA,KAHnBC,YAAY,GAAkB,MAAM;IAIlC,IAAI,CAACC,IAAI,GAAG,UAAU;IACtB,IAAI,CAACC,OAAO,GAAG,IAAI,CAACH,IAAI,CAACG,OAAO,IAAIZ,YAAY;IAChD,IAAI,CAACa,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,EAAE,GAAG,IAAI,CAACL,IAAI,CAACK,EAAE,IAAI,aAAa;IACvC,IAAI,CAACC,IAAI,GAAG,MACVb,CAAA;MACE,eAAY,MAAM;MAClBc,SAAS,EAAC,OAAO;MACjBC,KAAK,EAAC,IAAI;MACVC,MAAM,EAAC,IAAI;MACXC,OAAO,EAAC;IAAW,GAEnBjB,CAAA;MAAGkB,QAAQ,EAAC,SAAS;MAACC,IAAI,EAAC;IAAM,GAC/BnB,CAAA;MACEoB,CAAC,EAAC,kGAAkG;MACpGD,IAAI,EAAC;IAAS,CACf,CAAC,EACFnB,CAAA;MACEoB,CAAC,EAAC,mGAAmG;MACrGD,IAAI,EAAC;IAAS,CACf,CAAC,EACFnB,CAAA;MACEoB,CAAC,EAAC,0HAA0H;MAC5HD,IAAI,EAAC;IAAS,CACf,CAAC,EACFnB,CAAA;MACEoB,CAAC,EAAC,2FAA2F;MAC7FD,IAAI,EAAC;IAAS,CACf,CAAC,EACFnB,CAAA;MACEoB,CAAC,EAAC,yGAAyG;MAC3GD,IAAI,EAAC;IAAS,CACf,CAAC,EACFnB,CAAA;MACEoB,CAAC,EAAC,uHAAuH;MACzHD,IAAI,EAAC;IAAS,CACf,CACA,CACA,CACN;IAED,IAAI,CAACZ,IAAI,CAACc,qBAAqB,GAAGxB,eAAe,CAC/C,IAAI,CAACU,IAAI,CAACc,qBAAqB,EAC/B,IAAI,CAACd,IAAI,CAACe,YACZ,CAAC;IACD,IAAI,CAACC,QAAQ,GAAG,IAAI3B,QAAQ,CAACU,IAAI,EAAE;MACjCgB,YAAY,EAAE,IAAI,CAACf,IAAI,CAACe,YAAY;MACpCE,gBAAgB,EAAE,IAAI,CAACjB,IAAI,CAACiB,gBAAgB;MAC5CC,mBAAmB,EAAE,IAAI,CAAClB,IAAI,CAACkB,mBAAmB;MAClDC,oBAAoB,EAAE,IAAI,CAACnB,IAAI,CAACmB,oBAAoB;MACpDH,QAAQ,EAAE,OAAO;MACjBI,QAAQ,EAAE,IAAI,CAACf,EAAE;MACjBgB,oBAAoB,EAAE;IACxB,CAAC,CAAC;IAEF,IAAI,CAACC,aAAa,GAAG3B,MAAM;IAE3B,IAAI,CAAC4B,QAAQ,CAAC,CAAC;IACf,IAAI,CAACC,KAAK,GAAG,IAAI,CAACC,IAAI,CAAC,uBAAuB,CAAC;IAE/C,IAAI,CAACC,MAAM,GAAG,IAAI,CAACA,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC;EACtC;EAEAC,OAAOA,CAAA,EAAS;IACd,IAAI,CAACC,IAAI,GAAG,IAAInC,kBAAkB,CAAC,IAAI,EAAE;MACvCsB,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBc,YAAY,EAAE,IAAI;MAClBC,WAAW,EAAE;IACf,CAAC,CAAC;IAEF,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAI,CAAChC,IAAI;IAC5B,IAAIgC,MAAM,EAAE;MACV,IAAI,CAACC,KAAK,CAACD,MAAM,EAAE,IAAI,CAAC;IAC1B;EACF;EAEAE,SAASA,CAAA,EAAS;IAChB,IAAI,CAACL,IAAI,CAACM,QAAQ,CAAC,CAAC;IACpB,IAAI,CAACC,OAAO,CAAC,CAAC;EAChB;EAEAV,MAAMA,CAACW,KAAc,EAAkB;IACrC,OAAO,IAAI,CAACR,IAAI,CAACH,MAAM,CAACW,KAAK,CAAC;EAChC;AACF;AAxGqBxC,WAAW,CAIvByC,OAAO,GAAG1C,WAAW,CAAC2C,OAAO","ignoreList":[]}
{"version":3,"names":["getAllowedHosts","tokenStorage","SearchProvider","UIPlugin","SearchProviderViews","h","locale","packageJson","Unsplash","constructor","uppy","opts","type","files","storage","id","defaultLocale","i18nInit","title","i18n","icon","className","viewBox","height","width","fill","d","companionUrl","Error","hostname","companionAllowedHosts","provider","companionHeaders","companionCookiesRule","pluginId","install","view","viewType","showFilter","target","mount","render","state","uninstall","unmount","VERSION","version"],"sources":["Unsplash.tsx"],"sourcesContent":["import {\n  getAllowedHosts,\n  tokenStorage,\n  type CompanionPluginOptions,\n  SearchProvider,\n} from '@uppy/companion-client'\nimport { UIPlugin, Uppy } from '@uppy/core'\nimport { SearchProviderViews } from '@uppy/provider-views'\nimport { h, type ComponentChild } from 'preact'\n\nimport type { UppyFile, Body, Meta } from '@uppy/utils/lib/UppyFile'\nimport type {\n  AsyncStore,\n  UnknownSearchProviderPlugin,\n  UnknownSearchProviderPluginState,\n} from '@uppy/core/lib/Uppy.js'\nimport locale from './locale.ts'\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../package.json'\n\nexport type UnsplashOptions = CompanionPluginOptions\n\nexport default class Unsplash<M extends Meta, B extends Body>\n  extends UIPlugin<UnsplashOptions, M, B, UnknownSearchProviderPluginState>\n  implements UnknownSearchProviderPlugin<M, B>\n{\n  static VERSION = packageJson.version\n\n  icon: () => h.JSX.Element\n\n  provider: SearchProvider<M, B>\n\n  view!: SearchProviderViews<M, B>\n\n  storage: AsyncStore\n\n  files: UppyFile<M, B>[]\n\n  hostname: string\n\n  constructor(uppy: Uppy<M, B>, opts: UnsplashOptions) {\n    super(uppy, opts)\n    this.type = 'acquirer'\n    this.files = []\n    this.storage = this.opts.storage || tokenStorage\n    this.id = this.opts.id || 'Unsplash'\n\n    this.defaultLocale = locale\n    this.i18nInit()\n    this.title = this.i18n('pluginNameUnsplash')\n\n    this.icon = () => (\n      <svg\n        className=\"uppy-DashboardTab-iconUnsplash\"\n        viewBox=\"0 0 32 32\"\n        height=\"32\"\n        width=\"32\"\n        aria-hidden=\"true\"\n      >\n        <g fill=\"currentcolor\">\n          <path d=\"M46.575 10.883v-9h12v9zm12 5h10v18h-32v-18h10v9h12z\" />\n          <path d=\"M13 12.5V8h6v4.5zm6 2.5h5v9H8v-9h5v4.5h6z\" />\n        </g>\n      </svg>\n    )\n\n    if (!this.opts.companionUrl) {\n      throw new Error(\n        'Companion hostname is required, please consult https://uppy.io/docs/companion',\n      )\n    }\n\n    this.hostname = this.opts.companionUrl\n\n    this.opts.companionAllowedHosts = getAllowedHosts(\n      this.opts.companionAllowedHosts,\n      this.opts.companionUrl,\n    )\n    this.provider = new SearchProvider(uppy, {\n      companionUrl: this.opts.companionUrl,\n      companionHeaders: this.opts.companionHeaders,\n      companionCookiesRule: this.opts.companionCookiesRule,\n      provider: 'unsplash',\n      pluginId: this.id,\n    })\n  }\n\n  install(): void {\n    this.view = new SearchProviderViews(this, {\n      provider: this.provider,\n      viewType: 'unsplash',\n      showFilter: true,\n    })\n\n    const { target } = this.opts\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n\n  render(state: unknown): ComponentChild {\n    return this.view.render(state)\n  }\n\n  uninstall(): void {\n    this.unmount()\n  }\n}\n"],"mappings":"AAAA,SACEA,eAAe,EACfC,YAAY,EAEZC,cAAc,QACT,wBAAwB;AAC/B,SAASC,QAAQ,QAAc,YAAY;AAC3C,SAASC,mBAAmB,QAAQ,sBAAsB;AAC1D,SAASC,CAAC,QAA6B,QAAQ;AAQ/C,OAAOC,MAAM,MAAM,aAAa;AAChC;AACA;AAAA,MACOC,WAAW;EAAA;AAAA;AAIlB,eAAe,MAAMC,QAAQ,SACnBL,QAAQ,CAElB;EAeEM,WAAWA,CAACC,IAAgB,EAAEC,IAAqB,EAAE;IACnD,KAAK,CAACD,IAAI,EAAEC,IAAI,CAAC;IACjB,IAAI,CAACC,IAAI,GAAG,UAAU;IACtB,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,OAAO,GAAG,IAAI,CAACH,IAAI,CAACG,OAAO,IAAIb,YAAY;IAChD,IAAI,CAACc,EAAE,GAAG,IAAI,CAACJ,IAAI,CAACI,EAAE,IAAI,UAAU;IAEpC,IAAI,CAACC,aAAa,GAAGV,MAAM;IAC3B,IAAI,CAACW,QAAQ,CAAC,CAAC;IACf,IAAI,CAACC,KAAK,GAAG,IAAI,CAACC,IAAI,CAAC,oBAAoB,CAAC;IAE5C,IAAI,CAACC,IAAI,GAAG,MACVf,CAAA;MACEgB,SAAS,EAAC,gCAAgC;MAC1CC,OAAO,EAAC,WAAW;MACnBC,MAAM,EAAC,IAAI;MACXC,KAAK,EAAC,IAAI;MACV,eAAY;IAAM,GAElBnB,CAAA;MAAGoB,IAAI,EAAC;IAAc,GACpBpB,CAAA;MAAMqB,CAAC,EAAC;IAAqD,CAAE,CAAC,EAChErB,CAAA;MAAMqB,CAAC,EAAC;IAA2C,CAAE,CACpD,CACA,CACN;IAED,IAAI,CAAC,IAAI,CAACf,IAAI,CAACgB,YAAY,EAAE;MAC3B,MAAM,IAAIC,KAAK,CACb,+EACF,CAAC;IACH;IAEA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAClB,IAAI,CAACgB,YAAY;IAEtC,IAAI,CAAChB,IAAI,CAACmB,qBAAqB,GAAG9B,eAAe,CAC/C,IAAI,CAACW,IAAI,CAACmB,qBAAqB,EAC/B,IAAI,CAACnB,IAAI,CAACgB,YACZ,CAAC;IACD,IAAI,CAACI,QAAQ,GAAG,IAAI7B,cAAc,CAACQ,IAAI,EAAE;MACvCiB,YAAY,EAAE,IAAI,CAAChB,IAAI,CAACgB,YAAY;MACpCK,gBAAgB,EAAE,IAAI,CAACrB,IAAI,CAACqB,gBAAgB;MAC5CC,oBAAoB,EAAE,IAAI,CAACtB,IAAI,CAACsB,oBAAoB;MACpDF,QAAQ,EAAE,UAAU;MACpBG,QAAQ,EAAE,IAAI,CAACnB;IACjB,CAAC,CAAC;EACJ;EAEAoB,OAAOA,CAAA,EAAS;IACd,IAAI,CAACC,IAAI,GAAG,IAAIhC,mBAAmB,CAAC,IAAI,EAAE;MACxC2B,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBM,QAAQ,EAAE,UAAU;MACpBC,UAAU,EAAE;IACd,CAAC,CAAC;IAEF,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAI,CAAC5B,IAAI;IAC5B,IAAI4B,MAAM,EAAE;MACV,IAAI,CAACC,KAAK,CAACD,MAAM,EAAE,IAAI,CAAC;IAC1B;EACF;EAEAE,MAAMA,CAACC,KAAc,EAAkB;IACrC,OAAO,IAAI,CAACN,IAAI,CAACK,MAAM,CAACC,KAAK,CAAC;EAChC;EAEAC,SAASA,CAAA,EAAS;IAChB,IAAI,CAACC,OAAO,CAAC,CAAC;EAChB;AACF;AArFqBpC,QAAQ,CAIpBqC,OAAO,GAAGtC,WAAW,CAACuC,OAAO","ignoreList":[]}
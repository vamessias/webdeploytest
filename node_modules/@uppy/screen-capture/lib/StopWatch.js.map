{"version":3,"names":["h","Component","fmtMSS","s","StopWatch","constructor","props","wrapperStyle","width","height","display","overlayStyle","position","background","opacity","infoContainerStyle","marginLeft","marginRight","marginTop","marginBottom","zIndex","color","infotextStyle","fontSize","timeStyle","fontWeight","fontFamily","timerRunning","state","elapsedTime","startTimer","timerTick","resetTimer","clearTimeout","timer","setState","setTimeout","render","recording","i18n","minAndSec","style"],"sources":["StopWatch.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { h, Component } from 'preact'\n\ntype $TSFixMe = any\n\nfunction fmtMSS(s: number) {\n  // eslint-disable-next-line no-return-assign, no-param-reassign\n  return (s - (s %= 60)) / 60 + (s > 9 ? ':' : ':0') + s\n}\n\nclass StopWatch extends Component {\n  private wrapperStyle = {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n  } as const\n\n  private overlayStyle = {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    background: 'black',\n    opacity: 0.7,\n  } as const\n\n  private infoContainerStyle = {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    marginTop: 'auto',\n    marginBottom: 'auto',\n    zIndex: 1,\n    color: 'white',\n  } as const\n\n  private infotextStyle = {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    marginBottom: '1rem',\n    fontSize: '1.5rem',\n  } as const\n\n  private timeStyle = {\n    display: 'block',\n    fontWeight: 'bold',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    fontSize: '3rem',\n    fontFamily: 'Courier New',\n  } as const\n\n  private timerRunning: boolean = false\n\n  private timer?: ReturnType<typeof setTimeout>\n\n  constructor(props: $TSFixMe) {\n    super(props)\n    this.state = { elapsedTime: 0 }\n  }\n\n  startTimer() {\n    this.timerTick()\n    this.timerRunning = true\n  }\n\n  resetTimer() {\n    clearTimeout(this.timer)\n    this.setState({ elapsedTime: 0 })\n    this.timerRunning = false\n  }\n\n  timerTick() {\n    this.timer = setTimeout(() => {\n      this.setState((state: $TSFixMe) => ({\n        elapsedTime: state.elapsedTime + 1,\n      }))\n      this.timerTick()\n    }, 1000)\n  }\n\n  render() {\n    const { recording, i18n } = { ...this.props } as $TSFixMe\n    const { elapsedTime } = this.state as $TSFixMe\n\n    // second to minutes and seconds\n    const minAndSec = fmtMSS(elapsedTime)\n\n    if (recording && !this.timerRunning) {\n      this.startTimer()\n    }\n\n    if (!recording && this.timerRunning) {\n      this.resetTimer()\n    }\n\n    if (recording) {\n      return (\n        <div style={this.wrapperStyle}>\n          <div style={this.overlayStyle} />\n          <div style={this.infoContainerStyle}>\n            <div style={this.infotextStyle}>{i18n('recording')}</div>\n            <div style={this.timeStyle}>{minAndSec}</div>\n          </div>\n        </div>\n      )\n    }\n    return null\n  }\n}\n\nexport default StopWatch\n"],"mappings":"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","ignoreList":[]}